### Variables
@baseUrl = http://localhost:8080

# ============================================================
# PHASE 1: CREATE & READ
# ============================================================

### 1. GET all accounts (initially empty or seeded data)
GET {{baseUrl}}/accounts

### 2. CREATE first account
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "user2",
  "password": "pass2"
}

### 3. CREATE second account
POST {{baseUrl}}/authors
Content-Type: application/json

{
  "username": "user3",
  "password": "pass3"
}

### 4. GET all accounts again (should show 3 accounts)
GET {{baseUrl}}/accounts

### 5. CREATE duck for user2
POST {{baseUrl}}/ducks
Content-Type: application/json

{
  "account_id": 2,
  "totalQuack": 123,
  "currentQuack": 123,
  "duckTaps": 123,
  "moreDucks": 0,
  "fish": 0,
  "watermelon": 0,
  "ponds": 0
}

### 6. CREATE duck for user3
POST {{baseUrl}}/ducks
Content-Type: application/json

{
  "account_id": 3,
  "totalQuack": 0,
  "currentQuack": 0,
  "duckTaps": 0,
  "moreDucks": 0,
  "fish": 0,
  "watermelon": 0,
  "ponds": 0 
}

### 7. GET all ducks
GET {{baseUrl}}/ducks

# ============================================================
# VALIDATION TESTS
# ============================================================

### 10. CREATE account - Missing username (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "",
  "password": "password"
}

### 11. CREATE account - Missing password (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "user4",
  "password": ""
}

### 12. CREATE account - Duplicate username (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "user2",
  "password": "pass4"
}

### 13. CREATE duck - Invalid account_id (should fail with 400)
POST {{baseUrl}}/ducks
Content-Type: application/json

{
  "account_id": 4,
  "totalQuack": 0,
  "currentQuack": 0,
  "duckTaps": 0,
  "moreDucks": 0,
  "fish": 0,
  "watermelon": 0,
  "ponds": 0
}

### 14. CREATE duck - Existing account_id (should fail with 400)
POST {{baseUrl}}/ducks
Content-Type: application/json

{
  "account_id": 1,
  "totalQuack": 0,
  "currentQuack": 0,
  "duckTaps": 0,
  "moreDucks": 0,
  "fish": 0,
  "watermelon": 0,
  "ponds": 0
}


# ============================================================
# PHASE 2: UPDATE & DELETE
# ============================================================

### 17. GET single author by ID
GET {{baseUrl}}/authors/1

### 18. UPDATE author - Change biography
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{
  "biography": "British author and philanthropist, creator of the Harry Potter fantasy series",
  "updatedBy": "editor"
}

### 19. UPDATE author - Change email
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{
  "email": "jk.rowling.updated@example.com",
  "updatedBy": "admin"
}

### 20. UPDATE author - Change multiple fields
PUT {{baseUrl}}/authors/2
Content-Type: application/json

{
  "name": "George Orwell (Eric Blair)",
  "biography": "English novelist, essayist, journalist, and critic. His pen name was George Orwell.",
  "updatedBy": "editor"
}

### 21. GET author again to verify updates
GET {{baseUrl}}/authors/1

### 22. GET single book by ID
GET {{baseUrl}}/books/1

### 23. UPDATE book - Change title
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "title": "Harry Potter and the Sorcerer's Stone",
  "updatedBy": "editor"
}

### 24. UPDATE book - Change author (reassign book)
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "authorId": 2,
  "updatedBy": "admin"
}

### 25. UPDATE book - Change multiple fields
PUT {{baseUrl}}/books/3
Content-Type: application/json

{
  "title": "Norwegian Wood (Remastered Edition)",
  "pages": 320,
  "updatedBy": "editor"
}

### 26. GET book again to verify updates
GET {{baseUrl}}/books/1

### 27. DELETE book (soft delete)
DELETE {{baseUrl}}/books/3

### 28. GET all books (book 3 should not appear)
GET {{baseUrl}}/books

### 29. TRY to delete author with books (should fail)
DELETE {{baseUrl}}/authors/1

### 30. DELETE author without books
DELETE {{baseUrl}}/authors/3

### 31. GET all authors (author 3 should not appear)
GET {{baseUrl}}/authors


# ============================================================
# VALIDATION TESTS - UPDATE
# ============================================================

### 32. UPDATE author - Invalid email format
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{
  "email": "not-an-email"
}

### 33. UPDATE author - Duplicate email
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{
  "email": "george.orwell@example.com"
}

### 34. UPDATE author - No fields provided
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{}

### 35. UPDATE book - Invalid ISBN
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "isbn": "123"
}

### 36. UPDATE book - Invalid author ID
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "authorId": 999
}

### 37. UPDATE book - Invalid year
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "publishedYear": 1200
}


# ============================================================
# VALIDATION TESTS - DELETE
# ============================================================

### 38. DELETE non-existent author
DELETE {{baseUrl}}/authors/999

### 39. DELETE already deleted author
DELETE {{baseUrl}}/authors/3

### 40. DELETE non-existent book
DELETE {{baseUrl}}/books/999