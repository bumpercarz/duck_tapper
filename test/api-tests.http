### Variables
@baseUrl = http://localhost:8080

# ============================================================
# PHASE 1: CREATE & READ
# ============================================================

### 1. GET all authors (initially empty or seeded data) 
GET {{baseUrl}}/accounts

### 2. CREATE first account - admin
POST {{baseUrl}}/accounts
Content-Type: application/json

{
    "username": "admin",
    "password": "adminpassword"
}

### 3. CREATE second account - Mico Gutang
POST {{baseUrl}}/accounts
Content-Type: application/json

{
    "username": "Mico Gutang",
    "password": "duckquacker"
}

### 4. GET all 3 accounts 
GET {{baseUrl}}/accounts


### 5. GET seeded Duck
GET {{baseUrl}}/ducks

### 6. CREATE empty duck tied to admin
POST {{baseUrl}}/ducks
Content-Type: application/json

{
    "account_id": 2,
    "totalQuack": 0,
    "currentQuack": 0,
    "duckTaps": 0,
    "moreDucks": 0,
    "fish": 0,
    "watermelon": 0,
    "ponds": 0
}


### 7. CREATE empty duck tied to Mico Gutang
POST {{baseUrl}}/ducks
Content-Type: application/json

{
    "account_id": 3,
    "totalQuack": 0,
    "currentQuack": 0,
    "duckTaps": 0,
    "moreDucks": 0,
    "fish": 0,
    "watermelon": 0,
    "ponds": 0
}


### 5. GET all Ducks
GET {{baseUrl}}/ducks

# ============================================================
# VALIDATION TESTS
# ============================================================

### 6. CREATE account - Missing name (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "password": "failed"
}

### 7. CREATE account - Missing password (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "failed"
}

### 8. CREATE author - Duplicate email (should fail with 400)
POST {{baseUrl}}/accounts
Content-Type: application/json

{
  "username": "admin",
  "password": "failed"
}

### 9. CREATE duck - Negative values (should fail with 400)
POST {{baseUrl}}/ducks
Content-Type: application/json

{
    "account_id": 1,
    "totalQuack": -1,
    "currentQuack": 0,
    "duckTaps": 0,
    "moreDucks": 0,
    "fish": 0,
    "watermelon": 0,
    "ponds": 0
}

# ============================================================
# PHASE 2: UPDATE & DELETE
# ============================================================

### 10. GET single author by ID
GET {{baseUrl}}/accounts/1

### 11. UPDATE account - Change username
PUT {{baseUrl}}/accounts/1
Content-Type: application/json

{
  "username":"changenametest"
}

### 11. UPDATE account - Change password
PUT {{baseUrl}}/accounts/1
Content-Type: application/json

{
  "password":"newpassword"
}

### 11. UPDATE account - Change all
PUT {{baseUrl}}/accounts/1
Content-Type: application/json

{
  "username":"newname",
  "password":"newpassword2"
}
### 21. GET author again to verify updates
GET {{baseUrl}}/authors/1

### 22. GET single book by ID
GET {{baseUrl}}/books/1

### 23. UPDATE book - Change title
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "title": "Harry Potter and the Sorcerer's Stone",
  "updatedBy": "editor"
}

### 24. UPDATE book - Change author (reassign book)
PUT {{baseUrl}}/books/1
Content-Type: application/json

{
  "authorId": 2,
  "updatedBy": "admin"
}

### 25. UPDATE book - Change multiple fields
PUT {{baseUrl}}/books/3
Content-Type: application/json

{
  "title": "Norwegian Wood (Remastered Edition)",
  "pages": 320,
  "updatedBy": "editor"
}

### 26. GET book again to verify updates
GET {{baseUrl}}/books/1

### 27. DELETE book (soft delete)
DELETE {{baseUrl}}/books/3

### 28. GET all books (book 3 should not appear)
GET {{baseUrl}}/books

### 29. TRY to delete author with books (should fail)
DELETE {{baseUrl}}/authors/1

### 30. DELETE author without books
DELETE {{baseUrl}}/authors/3

### 31. GET all authors (author 3 should not appear)
GET {{baseUrl}}/authors

# ============================================================
# VALIDATION TESTS - UPDATE
# ============================================================

### 32. UPDATE author - Invalid email format
PUT {{baseUrl}}/authors/1
Content-Type: application/json

{
  "email": "not-an-email"
}

### 33. UPDATE author - Duplicate email
PUT {{baseUrl}}/authors/2
Content-Type: application/json

{
  "email": "george.orwell@example.com"
}

### 34. UPDATE author - No fields provided
PUT {{baseUrl}}/authors/2
Content-Type: application/json

{}

### 35. UPDATE book - Invalid ISBN
PUT {{baseUrl}}/books/2
Content-Type: application/json

{
  "isbn": "123"
}

### 36. UPDATE book - Invalid author ID
PUT {{baseUrl}}/books/2
Content-Type: application/json

{
  "authorId": 999
}

### 37. UPDATE book - Invalid year
PUT {{baseUrl}}/books/2
Content-Type: application/json

{
  "publishedYear": 1200
}

# ============================================================
# VALIDATION TESTS - DELETE
# ============================================================

### 38. DELETE non-existent author
DELETE {{baseUrl}}/authors/999

### 39. DELETE already deleted author
DELETE {{baseUrl}}/authors/3

### 40. DELETE non-existent book
DELETE {{baseUrl}}/books/999